@using System.Web.UI.WebControls
@using Model
@using Resources
@model JohannesVidnerProject.Models.DetailViewModel
@{
    ViewBag.Title = "Details";
}
<br />
<div class="h2 col-md-12">@ViewBag.Title</div>
<hr />
<div class="form-horizontal">
    <div class="form-group">
        <div class="col-md-2"><strong>@langResources.Views_Home_Details_publicationName</strong></div>
        <div class="col-md-10">@Model.ShortName</div>
    </div>
    <div class="form-group">
        <div class="col-md-2"><strong>@langResources.Views_Home_Details_publicationID</strong></div>
        <div class="col-md-10">@Model.PublicationId</div>
    </div>
    <div class="form-group">
        <div class="col-md-2 text-@Model.CssClass"><strong>@langResources.Views_Home_Details_currentStatus</strong></div>
        <div class="col-md-10 text-@Model.CssClass">@Model.ErrorMessage</div>
    </div>
    <div class="form-group">
        <div class="col-md-2"><strong>@langResources.Views_Home_Details_editionID</strong></div>
        <div class="col-md-10">@Model.EditionId</div>
    </div>
    <div class="form-group">
        <div class="col-md-2"><strong>@langResources.Views_Home_Details_pageTolerance</strong></div>
        <div class="col-md-10">@Model.MaxMissingPages</div>
    </div>
    <div class="form-group">
        <div class="col-md-2"><strong>@langResources.Views_Home_Details_numberOfPages</strong></div>
        <div class="col-md-10">@Model.NumberOfPages</div>
    </div>
    <div class="form-group">
        <div class="col-md-2"><strong>@langResources.Views_Home_Details_runningStarted</strong></div>
        <div class="col-md-10">@Model.RunningStarted</div>
    </div>
    <div class="form-group">
        <div class="col-md-2"><strong>@langResources.Views_Home_Details_expectedReleaseTime</strong></div>
        <div class="col-md-10">
            @if (@Model.ExpectedReleaseTime == null)
            { <div>@langResources.Views_Home_Details_unknown</div> }
            else
            {<div>@Model.ExpectedReleaseTime</div>}
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-2"><strong>@langResources.Views_Home_Details_lastLogCheck</strong></div>
        <div class="col-md-10">@Model.LastLogCheck</div>
    </div>
    <div class="btn">
        @if (Session.GetCurrentUser().WriteAccess)
        {
            if (Model.Status == CurrentStatus.OnHold)
            {
                <button class="btn btn-primary">@langResources.Views_Home_Details_release</button>
                <button class="btn btn-primary">@langResources.Views_Home_Details_rerun</button>
                <button class="btn btn-primary" onclick="change()" id="logShowBtn">@langResources.Views_Home_Details_showLog</button>
                <button class="hide" onclick="change()" id="logHideBtn">@langResources.Views_Home_Details_hideLog</button>
            }
            else if (Model.Status != CurrentStatus.Running)
            {
                <button class="btn btn-primary">@langResources.Views_Home_Details_rerun</button>
                <button class="btn btn-primary" onclick="change()" id="logShowBtn">@langResources.Views_Home_Details_showLog</button>
                <button class="hide" onclick="change()" id="logHideBtn">@langResources.Views_Home_Details_hideLog</button>
            }
            else
            {
                <button class="btn btn-primary" onclick="change()" id="logShowBtn">@langResources.Views_Home_Details_showLog</button>
                <button class="hide" onclick="change()" id="logHideBtn">@langResources.Views_Home_Details_hideLog</button>
            }
        }
    </div>
    <div class="form-group" hidden="true" id="log">
        <hr />
        <div class="col-md-2"><strong>@langResources.Views_Home_Details_logText</strong></div>
        <div class="col-md-10">@Model.LogText</div>
    </div>
</div>
<script type="text/javascript">
    function change() {
        if (document.getElementById("log").hidden) {
            document.getElementById("log").hidden = false;
            document.getElementById("logShowBtn").className = "hide";
            document.getElementById("logHideBtn").className = "btn btn-primary";
        }
        else {
            document.getElementById("log").hidden = true;
            document.getElementById("logShowBtn").className = "btn btn-primary";
            document.getElementById("logHideBtn").className = "hide";
        }
    }
</script>
